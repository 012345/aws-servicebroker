FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHI1My1zYW1wbGUtYXBwLWFwYgpkZXNjcmlwdGlvbjogZGVwbG95\
cyBhIHNhbXBsZSB3ZWIgYXBwbGljYXRpb24KYmluZGFibGU6IGZhbHNlCmFzeW5jOiBvcHRpb25h\
bAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogIkFtYXpvbiBSb3V0ZTUzIEhvc3RlZCBab25lIFNh\
bXBsZSBBcHBsaWNhdGlvbiAoQVBCKSIKICBsb25nRGVzY3JpcHRpb246IEEgc2FtcGxlIEFQQiB3\
aGljaCBkZXBsb3lzIGEgY29udGFpbmVyaXplZCBzYW1wbGUgd2ViIGFwcGxpY2F0aW9uCiAgaW1h\
Z2VVcmw6ICJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vdGhwLWF3cy1pY29ucy1kZXYvcjUzX3Nh\
bXBsZS5wbmciCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogIlRoZSBIZWxpb3MgUHJvamVjdCIKcGxh\
bnM6CiAgLSBuYW1lOiByNTMtc2FtcGxlCiAgICBkZXNjcmlwdGlvbjogQSBzYW1wbGUgQVBCIHdo\
aWNoIGRlcGxveXMgYSBQeXRob24gd2ViIGFwcGxpY2F0aW9uIHRvIGV4cG9zZSBhIFJFU1RmdWwg\
YXBpIHRvIGFuIEFXUyBBUEIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNw\
bGF5TmFtZTogUm91dGU1MyBSRVNUIFNhbXBsZQogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMg\
cGxhbiBkZXBsb3lzIGEgUHl0aG9uIHdlYiBhcHBsaWNhdGlvbiB0byBleHBvc2UgYSBSRVNUZnVs\
IGFwaSB0byBhbiBBV1MgQVBCCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiBbXQ=="



ADD playbooks /opt/apb/actions
ADD roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
