FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGVsYXN0aWNhY2hlLXNhbXBsZS1hcHAtYXBiCmRlc2NyaXB0aW9u\
OiBkZXBsb3lzIGEgc2FtcGxlIHdlYiBhcHBsaWNhdGlvbgpiaW5kYWJsZTogZmFsc2UKYXN5bmM6\
IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiAiQW1hem9uIEVsYXN0aWNhY2hlIFNh\
bXBsZSBBcHBsaWNhdGlvbiAoQVBCKSIKICBsb25nRGVzY3JpcHRpb246IEEgc2FtcGxlIEFQQiB3\
aGljaCBkZXBsb3lzIGEgY29udGFpbmVyaXplZCBzYW1wbGUgd2ViIGFwcGxpY2F0aW9uCiAgaW1h\
Z2VVcmw6ICJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vdGhwLWF3cy1pY29ucy1kZXYvZWxhc3Rp\
Y2FjaGVfc2FtcGxlLnBuZyIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiVGhlIEhlbGlvcyBQcm9q\
ZWN0IgpwbGFuczoKICAtIG5hbWU6IGVsYXN0aWNhY2hlLXNhbXBsZQogICAgZGVzY3JpcHRpb246\
IEEgc2FtcGxlIEFQQiB3aGljaCBkZXBsb3lzIGEgUHl0aG9uIHdlYiBhcHBsaWNhdGlvbiB0byBl\
eHBvc2UgYSBSRVNUZnVsIGFwaSB0byBhbiBBV1MgQVBCCiAgICBmcmVlOiBUcnVlCiAgICBtZXRh\
ZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEVsYXN0aWNhY2hlIFJFU1QgU2FtcGxlCiAgICAgIGxv\
bmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBQeXRob24gd2ViIGFwcGxpY2F0aW9u\
IHRvIGV4cG9zZSBhIFJFU1RmdWwgYXBpIHRvIGFuIEFXUyBBUEIKICAgICAgY29zdDogJDAuMDAK\
ICAgIHBhcmFtZXRlcnM6IFtd"


ADD playbooks /opt/apb/actions
ADD roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
